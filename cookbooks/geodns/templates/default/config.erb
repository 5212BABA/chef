options => {
  listen => [ <%= node.ipaddresses(:role => :external).join(", ") %> ]
}

plugins => {
  geoip => {
    maps => {
      country => {
        geoip2_db => /var/lib/GeoIP/GeoLite2-Country.mmdb
        datacenters => [ad,ae,af,ag,ai,al,am,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,bd,be,bf,bg,bh,bi,bj,bl,bm,bn,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,ck,cl,cm,cn,co,cr,cu,cv,cx,cy,cz,de,dj,dk,dm,do,dz,ec,ee,eg,eh,er,es,et,fi,fj,fk,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gu,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,il,im,in,io,iq,ir,is,it,je,jm,jo,jp,ke,kg,kh,ki,km,kn,kp,kr,kw,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mf,mg,mh,mk,ml,mm,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,na,nc,ne,nf,ng,ni,nl,no,np,nr,nu,nz,om,pa,pe,pf,pg,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,sv,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tr,tt,tv,tw,tz,ua,ug,um,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,xx,ye,yt,za,zm,zw]
        map => {
          default => [xx]
          AF => {
            AO => [ao]
            BF => [bf]
            BI => [bi]
            BJ => [bj]
            BW => [bw]
            CD => [cd]
            CF => [cf]
            CG => [cg]
            CI => [ci]
            CM => [cm]
            CV => [cv]
            DJ => [dj]
            DZ => [dz]
            EG => [eg]
            EH => [eh]
            ER => [er]
            ET => [et]
            GA => [ga]
            GH => [gh]
            GM => [gm]
            GN => [gn]
            GQ => [gq]
            GW => [gw]
            KE => [ke]
            KM => [km]
            LR => [lr]
            LS => [ls]
            LY => [ly]
            MA => [ma]
            MG => [mg]
            ML => [ml]
            MR => [mr]
            MU => [mu]
            MW => [mw]
            MZ => [mz]
            NA => [na]
            NE => [ne]
            NG => [ng]
            RE => [re]
            RW => [rw]
            SC => [sc]
            SD => [sd]
            SH => [sh]
            SL => [sl]
            SN => [sn]
            SO => [so]
            ST => [st]
            SZ => [sz]
            TD => [td]
            TG => [tg]
            TN => [tn]
            TZ => [tz]
            UG => [ug]
            YT => [yt]
            ZA => [za]
            ZM => [zm]
            ZW => [zw]
          }
          AN => {
            AQ => [aq]
            BV => [bv]
            GS => [gs]
            HM => [hm]
            TF => [tf]
          }
          AS => {
            AE => [ae]
            AF => [af]
            AM => [am]
            AZ => [az]
            BD => [bd]
            BH => [bh]
            BN => [bn]
            BT => [bt]
            CC => [cc]
            CN => [cn]
            CX => [cx]
            CY => [cy]
            GE => [ge]
            HK => [hk]
            ID => [id]
            IL => [il]
            IN => [in]
            IO => [io]
            IQ => [iq]
            IR => [ir]
            JO => [jo]
            JP => [jp]
            KG => [kg]
            KH => [kh]
            KP => [kp]
            KR => [kr]
            KW => [kw]
            KZ => [kz]
            LA => [la]
            LB => [lb]
            LK => [lk]
            MM => [mm]
            MN => [mn]
            MO => [mo]
            MV => [mv]
            MY => [my]
            NP => [np]
            OM => [om]
            PH => [ph]
            PK => [pk]
            PS => [ps]
            QA => [qa]
            SA => [sa]
            SG => [sg]
            SY => [sy]
            TH => [th]
            TJ => [tj]
            TL => [tl]
            TM => [tm]
            TW => [tw]
            UZ => [uz]
            VN => [vn]
            YE => [ye]
          }
          EU => {
            AD => [ad]
            AL => [al]
            AT => [at]
            AX => [ax]
            BA => [ba]
            BE => [be]
            BG => [bg]
            BY => [by]
            CH => [ch]
            CZ => [cz]
            DE => [de]
            DK => [dk]
            EE => [ee]
            ES => [es]
            FI => [fi]
            FO => [fo]
            FR => [fr]
            GB => [gb]
            GG => [gg]
            GI => [gi]
            GR => [gr]
            HR => [hr]
            HU => [hu]
            IE => [ie]
            IM => [im]
            IS => [is]
            IT => [it]
            JE => [je]
            LI => [li]
            LT => [lt]
            LU => [lu]
            LV => [lv]
            MC => [mc]
            MD => [md]
            ME => [me]
            MK => [mk]
            MT => [mt]
            NL => [nl]
            NO => [no]
            PL => [pl]
            PT => [pt]
            RO => [ro]
            RS => [rs]
            RU => [ru]
            SE => [se]
            SI => [si]
            SJ => [sj]
            SK => [sk]
            SM => [sm]
            TR => [tr]
            UA => [ua]
            VA => [va]
          }
          NA => {
            AG => [ag]
            AI => [ai]
            AW => [aw]
            BB => [bb]
            BL => [bl]
            BM => [bm]
            BS => [bs]
            BZ => [bz]
            CA => [ca]
            CR => [cr]
            CU => [cu]
            DM => [dm]
            DO => [do]
            GD => [gd]
            GL => [gl]
            GP => [gp]
            GT => [gt]
            HN => [hn]
            HT => [ht]
            JM => [jm]
            KN => [kn]
            KY => [ky]
            LC => [lc]
            MF => [mf]
            MQ => [mq]
            MS => [ms]
            MX => [mx]
            NI => [ni]
            PA => [pa]
            PM => [pm]
            PR => [pr]
            SV => [sv]
            TC => [tc]
            TT => [tt]
            US => [us]
            VC => [vc]
            VG => [vg]
            VI => [vi]
          }
          OC => {
            AS => [as]
            AU => [au]
            CK => [ck]
            FJ => [fj]
            FM => [fm]
            GU => [gu]
            KI => [ki]
            MH => [mh]
            MP => [mp]
            NC => [nc]
            NF => [nf]
            NR => [nr]
            NU => [nu]
            NZ => [nz]
            PF => [pf]
            PG => [pg]
            PN => [pn]
            PW => [pw]
            SB => [sb]
            TK => [tk]
            TO => [to]
            TV => [tv]
            UM => [um]
            VU => [vu]
            WF => [wf]
            WS => [ws]
          }
          SA => {
            AR => [ar]
            BO => [bo]
            BR => [br]
            CL => [cl]
            CO => [co]
            EC => [ec]
            FK => [fk]
            GF => [gf]
            GY => [gy]
            PE => [pe]
            PY => [py]
            SR => [sr]
            UY => [uy]
            VE => [ve]
          }
        }
      }
    }
    resources => {
      tile => {
        map => country
        dcmap => {
          ad => ad.tile.openstreetmap.org.
          ae => ae.tile.openstreetmap.org.
          af => af.tile.openstreetmap.org.
          ag => ag.tile.openstreetmap.org.
          ai => ai.tile.openstreetmap.org.
          al => al.tile.openstreetmap.org.
          am => am.tile.openstreetmap.org.
          ao => ao.tile.openstreetmap.org.
          aq => aq.tile.openstreetmap.org.
          ar => ar.tile.openstreetmap.org.
          as => as.tile.openstreetmap.org.
          at => at.tile.openstreetmap.org.
          au => au.tile.openstreetmap.org.
          aw => aw.tile.openstreetmap.org.
          ax => ax.tile.openstreetmap.org.
          az => az.tile.openstreetmap.org.
          ba => ba.tile.openstreetmap.org.
          bb => bb.tile.openstreetmap.org.
          bd => bd.tile.openstreetmap.org.
          be => be.tile.openstreetmap.org.
          bf => bf.tile.openstreetmap.org.
          bg => bg.tile.openstreetmap.org.
          bh => bh.tile.openstreetmap.org.
          bi => bi.tile.openstreetmap.org.
          bj => bj.tile.openstreetmap.org.
          bl => bl.tile.openstreetmap.org.
          bm => bm.tile.openstreetmap.org.
          bn => bn.tile.openstreetmap.org.
          bo => bo.tile.openstreetmap.org.
          br => br.tile.openstreetmap.org.
          bs => bs.tile.openstreetmap.org.
          bt => bt.tile.openstreetmap.org.
          bv => bv.tile.openstreetmap.org.
          bw => bw.tile.openstreetmap.org.
          by => by.tile.openstreetmap.org.
          bz => bz.tile.openstreetmap.org.
          ca => ca.tile.openstreetmap.org.
          cc => cc.tile.openstreetmap.org.
          cd => cd.tile.openstreetmap.org.
          cf => cf.tile.openstreetmap.org.
          cg => cg.tile.openstreetmap.org.
          ch => ch.tile.openstreetmap.org.
          ci => ci.tile.openstreetmap.org.
          ck => ck.tile.openstreetmap.org.
          cl => cl.tile.openstreetmap.org.
          cm => cm.tile.openstreetmap.org.
          cn => cn.tile.openstreetmap.org.
          co => co.tile.openstreetmap.org.
          cr => cr.tile.openstreetmap.org.
          cu => cu.tile.openstreetmap.org.
          cv => cv.tile.openstreetmap.org.
          cx => cx.tile.openstreetmap.org.
          cy => cy.tile.openstreetmap.org.
          cz => cz.tile.openstreetmap.org.
          de => de.tile.openstreetmap.org.
          dj => dj.tile.openstreetmap.org.
          dk => dk.tile.openstreetmap.org.
          dm => dm.tile.openstreetmap.org.
          do => do.tile.openstreetmap.org.
          dz => dz.tile.openstreetmap.org.
          ec => ec.tile.openstreetmap.org.
          ee => ee.tile.openstreetmap.org.
          eg => eg.tile.openstreetmap.org.
          eh => eh.tile.openstreetmap.org.
          er => er.tile.openstreetmap.org.
          es => es.tile.openstreetmap.org.
          et => et.tile.openstreetmap.org.
          fi => fi.tile.openstreetmap.org.
          fj => fj.tile.openstreetmap.org.
          fk => fk.tile.openstreetmap.org.
          fm => fm.tile.openstreetmap.org.
          fo => fo.tile.openstreetmap.org.
          fr => fr.tile.openstreetmap.org.
          ga => ga.tile.openstreetmap.org.
          gb => gb.tile.openstreetmap.org.
          gd => gd.tile.openstreetmap.org.
          ge => ge.tile.openstreetmap.org.
          gf => gf.tile.openstreetmap.org.
          gg => gg.tile.openstreetmap.org.
          gh => gh.tile.openstreetmap.org.
          gi => gi.tile.openstreetmap.org.
          gl => gl.tile.openstreetmap.org.
          gm => gm.tile.openstreetmap.org.
          gn => gn.tile.openstreetmap.org.
          gp => gp.tile.openstreetmap.org.
          gq => gq.tile.openstreetmap.org.
          gr => gr.tile.openstreetmap.org.
          gs => gs.tile.openstreetmap.org.
          gt => gt.tile.openstreetmap.org.
          gu => gu.tile.openstreetmap.org.
          gw => gw.tile.openstreetmap.org.
          gy => gy.tile.openstreetmap.org.
          hk => hk.tile.openstreetmap.org.
          hm => hm.tile.openstreetmap.org.
          hn => hn.tile.openstreetmap.org.
          hr => hr.tile.openstreetmap.org.
          ht => ht.tile.openstreetmap.org.
          hu => hu.tile.openstreetmap.org.
          id => id.tile.openstreetmap.org.
          ie => ie.tile.openstreetmap.org.
          il => il.tile.openstreetmap.org.
          im => im.tile.openstreetmap.org.
          in => in.tile.openstreetmap.org.
          io => io.tile.openstreetmap.org.
          iq => iq.tile.openstreetmap.org.
          ir => ir.tile.openstreetmap.org.
          is => is.tile.openstreetmap.org.
          it => it.tile.openstreetmap.org.
          je => je.tile.openstreetmap.org.
          jm => jm.tile.openstreetmap.org.
          jo => jo.tile.openstreetmap.org.
          jp => jp.tile.openstreetmap.org.
          ke => ke.tile.openstreetmap.org.
          kg => kg.tile.openstreetmap.org.
          kh => kh.tile.openstreetmap.org.
          ki => ki.tile.openstreetmap.org.
          km => km.tile.openstreetmap.org.
          kn => kn.tile.openstreetmap.org.
          kp => kp.tile.openstreetmap.org.
          kr => kr.tile.openstreetmap.org.
          kw => kw.tile.openstreetmap.org.
          ky => ky.tile.openstreetmap.org.
          kz => kz.tile.openstreetmap.org.
          la => la.tile.openstreetmap.org.
          lb => lb.tile.openstreetmap.org.
          lc => lc.tile.openstreetmap.org.
          li => li.tile.openstreetmap.org.
          lk => lk.tile.openstreetmap.org.
          lr => lr.tile.openstreetmap.org.
          ls => ls.tile.openstreetmap.org.
          lt => lt.tile.openstreetmap.org.
          lu => lu.tile.openstreetmap.org.
          lv => lv.tile.openstreetmap.org.
          ly => ly.tile.openstreetmap.org.
          ma => ma.tile.openstreetmap.org.
          mc => mc.tile.openstreetmap.org.
          md => md.tile.openstreetmap.org.
          me => me.tile.openstreetmap.org.
          mf => mf.tile.openstreetmap.org.
          mg => mg.tile.openstreetmap.org.
          mh => mh.tile.openstreetmap.org.
          mk => mk.tile.openstreetmap.org.
          ml => ml.tile.openstreetmap.org.
          mm => mm.tile.openstreetmap.org.
          mn => mn.tile.openstreetmap.org.
          mo => mo.tile.openstreetmap.org.
          mp => mp.tile.openstreetmap.org.
          mq => mq.tile.openstreetmap.org.
          mr => mr.tile.openstreetmap.org.
          ms => ms.tile.openstreetmap.org.
          mt => mt.tile.openstreetmap.org.
          mu => mu.tile.openstreetmap.org.
          mv => mv.tile.openstreetmap.org.
          mw => mw.tile.openstreetmap.org.
          mx => mx.tile.openstreetmap.org.
          my => my.tile.openstreetmap.org.
          mz => mz.tile.openstreetmap.org.
          na => na.tile.openstreetmap.org.
          nc => nc.tile.openstreetmap.org.
          ne => ne.tile.openstreetmap.org.
          nf => nf.tile.openstreetmap.org.
          ng => ng.tile.openstreetmap.org.
          ni => ni.tile.openstreetmap.org.
          nl => nl.tile.openstreetmap.org.
          no => no.tile.openstreetmap.org.
          np => np.tile.openstreetmap.org.
          nr => nr.tile.openstreetmap.org.
          nu => nu.tile.openstreetmap.org.
          nz => nz.tile.openstreetmap.org.
          om => om.tile.openstreetmap.org.
          pa => pa.tile.openstreetmap.org.
          pe => pe.tile.openstreetmap.org.
          pf => pf.tile.openstreetmap.org.
          pg => pg.tile.openstreetmap.org.
          ph => ph.tile.openstreetmap.org.
          pk => pk.tile.openstreetmap.org.
          pl => pl.tile.openstreetmap.org.
          pm => pm.tile.openstreetmap.org.
          pn => pn.tile.openstreetmap.org.
          pr => pr.tile.openstreetmap.org.
          ps => ps.tile.openstreetmap.org.
          pt => pt.tile.openstreetmap.org.
          pw => pw.tile.openstreetmap.org.
          py => py.tile.openstreetmap.org.
          qa => qa.tile.openstreetmap.org.
          re => re.tile.openstreetmap.org.
          ro => ro.tile.openstreetmap.org.
          rs => rs.tile.openstreetmap.org.
          ru => ru.tile.openstreetmap.org.
          rw => rw.tile.openstreetmap.org.
          sa => sa.tile.openstreetmap.org.
          sb => sb.tile.openstreetmap.org.
          sc => sc.tile.openstreetmap.org.
          sd => sd.tile.openstreetmap.org.
          se => se.tile.openstreetmap.org.
          sg => sg.tile.openstreetmap.org.
          sh => sh.tile.openstreetmap.org.
          si => si.tile.openstreetmap.org.
          sj => sj.tile.openstreetmap.org.
          sk => sk.tile.openstreetmap.org.
          sl => sl.tile.openstreetmap.org.
          sm => sm.tile.openstreetmap.org.
          sn => sn.tile.openstreetmap.org.
          so => so.tile.openstreetmap.org.
          sr => sr.tile.openstreetmap.org.
          st => st.tile.openstreetmap.org.
          sv => sv.tile.openstreetmap.org.
          sy => sy.tile.openstreetmap.org.
          sz => sz.tile.openstreetmap.org.
          tc => tc.tile.openstreetmap.org.
          td => td.tile.openstreetmap.org.
          tf => tf.tile.openstreetmap.org.
          tg => tg.tile.openstreetmap.org.
          th => th.tile.openstreetmap.org.
          tj => tj.tile.openstreetmap.org.
          tk => tk.tile.openstreetmap.org.
          tl => tl.tile.openstreetmap.org.
          tm => tm.tile.openstreetmap.org.
          tn => tn.tile.openstreetmap.org.
          to => to.tile.openstreetmap.org.
          tr => tr.tile.openstreetmap.org.
          tt => tt.tile.openstreetmap.org.
          tv => tv.tile.openstreetmap.org.
          tw => tw.tile.openstreetmap.org.
          tz => tz.tile.openstreetmap.org.
          ua => ua.tile.openstreetmap.org.
          ug => ug.tile.openstreetmap.org.
          um => um.tile.openstreetmap.org.
          us => us.tile.openstreetmap.org.
          uy => uy.tile.openstreetmap.org.
          uz => uz.tile.openstreetmap.org.
          va => va.tile.openstreetmap.org.
          vc => vc.tile.openstreetmap.org.
          ve => ve.tile.openstreetmap.org.
          vg => vg.tile.openstreetmap.org.
          vi => vi.tile.openstreetmap.org.
          vn => vn.tile.openstreetmap.org.
          vu => vu.tile.openstreetmap.org.
          wf => wf.tile.openstreetmap.org.
          ws => ws.tile.openstreetmap.org.
          xx => xx.tile.openstreetmap.org.
          ye => ye.tile.openstreetmap.org.
          yt => yt.tile.openstreetmap.org.
          za => za.tile.openstreetmap.org.
          zm => zm.tile.openstreetmap.org.
          zw => zw.tile.openstreetmap.org.
        }
      }
    }
  }
}
