#!/bin/sh

<% if node[:passenger][:ruby_version].to_f < 2.1 -%>
export RUBY_HEAP_MIN_SLOTS=500000
export RUBY_HEAP_FREE_MIN=100000
<% else -%>
export RUBY_GC_HEAP_INIT_SLOTS=500000
export RUBY_GC_HEAP_FREE_SLOTS=100000
<% end -%>
export RUBY_GC_MALLOC_LIMIT=50000000

exec /usr/bin/ruby<%= node[:passenger][:ruby_version] %> "$@"
